<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Progress Tracker</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="page-container">
    <h1>Progress Tracker</h1>
    <canvas id="progressChart" width="400" height="200"></canvas>
    <button id="doneProgress">Done</button>
  </div>

  <script src="student.js"></script>
  <script>
    const ctx = document.getElementById("progressChart").getContext("2d");
    let chart;

    function updateChart() {
      const labels = subjects.map(s => s.name);
      const completedData = subjects.map(s => s.completed);
      const remainingData = subjects.map(s => Math.max(s.total - s.completed, 0));

      if(chart) chart.destroy();

      chart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: labels,
          datasets: [
            {
              label: "Completed",
              data: completedData,
              backgroundColor: "#8e2de2"
            },
            {
              label: "Remaining",
              data: remainingData,
              backgroundColor: "#4a00e0"
            }
          ]
        },
        options: {
          responsive: true,
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                stepSize: 1
              }
            }
          }
        }
      });
    }

    // Initial chart render
    updateChart();

    // Done button moves to recommendations page
    document.getElementById("doneProgress").addEventListener("click", () => {
      window.location.href = "recommendation.html";
    });
  </script>
</body>
</html>